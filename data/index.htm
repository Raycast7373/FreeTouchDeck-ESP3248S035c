<!DOCTYPE html>
<html lang="en">

	<head>
		<link rel="shortcut icon" href="">
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
		<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\" />
		<title>FreeTouchDeck Configurator</title>
		<link rel="stylesheet" type="text/css" href="style.css">

		<script src="jquery-3.5.1.slim.min.js"></script>

		<!-- Password toggle -->
		<script type="text/javascript" src="toggle-password.js"></script>

		<!-- Menu Handler -->
		<script type="text/javascript" src="open-menu.js"></script>

		<!-- Load the array with all the dropdown menu items --->
		<script type="text/javascript" src="load-menu-items.js"></script>

		<!-- Loading button function --->
		<script type="text/javascript" src="load-button.js"></script>

		<!-- Load Config data from JSON -->
		<script type="text/javascript" src="load-config.js"></script>
	</head>

	<body>
		<!-- <div id="contentloading" class="pageloading"> Loading the configurator.</div> -->

		<div id="contentloading" class="pageloading">
			Loading Configurator
		</div>

		<div id="ball-loader" class="ball-loader">

			<div class="ball-loader-ball ball1"></div>
			<div class="ball-loader-ball ball2"></div>
			<div class="ball-loader-ball ball3"></div>
		</div>

		<div id="maincontent" style="display: none;">
			<h1>FreeTouchDeck Configurator</h1>
			<form class="form" method="post" action='/upload' id="uploadfile" enctype="multipart/form-data"></form>
			<form class="form" method="post" action='/uploadJSON' id="uploadjsonfile" enctype="multipart/form-data">
			</form>

			<!-- Menu -->
			<div class="tab">
				<button class="tablinks" onclick="openMenu(event, 'wifi')">WiFi</button>
				<button class="tablinks" onclick="openMenu(event, 'general')">Settings</button>
				<button class="tablinks" onclick="openMenu(event, 'menu')">Menu</button>
				<button class="tablinks" onclick="openMenu(event, 'uploadimage')">Upload logo</button>

				<form method='post' action='/restart'>
					<button style="float: right;"
						onclick="return confirm('Are you sure? Unsaved configuration will be lost!')" class="tablinks">
						Restart </button>
				</form>

				<button style="float: right;" class="tablinks" onclick="openMenu(event, 'info')">Info</button>

				<button style="float: right;" class="tablinks" onclick="openMenu(event, 'editor')">File editor</button>

				<button style="float: right;" class="tablinks" onclick="openMenu(event, 'uploadjson')">Upload Menu
					Config</button>

			</div>

			<!-- Tab Intro -->
			<div id="intro" class="tabcontent">
				<h3>Welcome</h3>
				<p>
					Welcome to the configurator! Select an option/page from the top menu. If you have any questions,
					join my
					Discord server: <a href="https://discord.gg/RE3XevS"
						target="_blank">https://discord.gg/RE3XevS</a><br />
					A guide on how to use the configurator can be found here: <a
						href="https://github.com/DustinWatts/FreeTouchDeck/wiki/3.-The-Configurator" target="_blank">
						FreeTouchDeck Wiki</a>
				</p>
			</div>
			<!-- Tab WiFi -->
			<div id="wifi" class="tabcontent">
				<div style="float: right; font-size: 11px"><a href="/download?file=wificonfig.json">download
						wificonfig.json</a></div><br>
				<h3>WiFi Settings</h3>
				<p>
				<form method='post' id="savewifi" action='/saveconfig'>



					<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">

						<label for="ssid">WiFi SSID:</label><br>
						<input type="text" id="ssid" name="ssid"><br><br>

						<label for="password">WiFi Password:</label><br>
						<input type="password" id="password" name="password" autocomplete="new-password"><br>
						<input type="checkbox" onclick="togglepassword()">Show Password <br><br>

						&nbsp;&nbsp;Wifi Mode:&nbsp;
						<select class="wifimode" id='wifimode' name='wifimode'>
							<option value="WIFI_STA">Station</option>
							<option value="WIFI_AP">Access Point</option>
						</select><br>

						<label for="wifihostname">Wifi Hostname:</label>
						<input type="text" id="wifihostname" name="wifihostname"><br>

						&nbsp;&nbsp;Connection attempts:&nbsp;
						<select class="attempts" id='attempts' name='attempts'>
							<option value="5">5</option>
							<option value="10">10</option>
							<option value="15">15</option>
							<option value="20">20</option>
						</select><br>

						&nbsp;&nbsp;Delay between attempts:&nbsp;
						<select class="attemptdelay" id='attemptdelay' name='attemptdelay'>
							<option value="100">100 ms</option>
							<option value="500">500 ms</option>
							<option value="1000">1000 ms</option>
							<option value="2000">2000 ms</option>
						</select><br>
					</div>

					<div class="form" style="width: 50%; text-align: : center; margin: auto;">
						<input type="hidden" id='save' name='save' value="wifi">
						<br /><button style='cursor: pointer;' form="savewifi" type='save'>Save WiFi Config</button>
					</div>
				</form>

			</div>
			</p>
		</div>
		<!-- Tab General -->
		<div id="general" class="tabcontent">
			<div style="float: right; font-size: 11px"><a href="/download?file=general.json">download general.json</a>
			</div>
			<br>
			<h3>General Settings</h3>
			<p>
			<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
				<h2>Colors</h2>
			</div>

			<form method='post' id="generalconfig" action='/saveconfig'>
				<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
					&nbsp;&nbsp;Menu Button Colour:&nbsp;
					<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='menubuttoncolor'
						name='menubuttoncolor' type="color" value=''>
					&nbsp;&nbsp;Function Button Colour:&nbsp;
					<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;'
						id='functionbuttoncolor' name='functionbuttoncolor' type="color" value=''>
					&nbsp;&nbsp;Latch Colour:&nbsp;
					<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='latchcolor'
						name='latchcolor' type="color" value=''>
					&nbsp;&nbsp;Background Colour:&nbsp;
					<input style='width: 100px; height: 30px; padding:1px; border-radius:0.3rem;' id='background'
						name='background' type="color" value=''>
				</div><br>

				<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
					<h2>Deep Sleep</h2>
				</div>

				&nbsp;&nbsp;Deep Sleep:&nbsp;
				<select class="sleepenable" id='sleepenable' name='sleepenable'>
					<option value="true">Enabled</option>
					<option value="false">Disabled</option>
				</select>
				&nbsp;&nbsp;Deep Sleep Timer:&nbsp;
				<select class="sleeptimer" id='sleeptimer' name='sleeptimer'>
					<option value="10">10 Minutes</option>
					<option value="20">20 Minutes</option>
					<option value="30">30 Minutes</option>
					<option value="60">60 Minutes</option>
				</select>

				<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
					<h2>Sound</h2>
				</div>

				&nbsp;&nbsp;Beep on Touch:&nbsp;
				<select class="sleepenable" id='beep' name='beep'>
					<option value="true">Enabled</option>
					<option value="false">Disabled</option>
				</select>

				<div style="font-family: Arial, Helvetica, Sans-Serif; Color: #000088;">
					<h2>FreeTouchDeck Helpers</h2>
				</div>

				&nbsp;&nbsp;Modifier 1:&nbsp;
				<select class="modifier1" id='modifier1' name='modifier1'>
					<option value="0">None</option>
					<option value="128">CTRL</option>
					<option value="129">SHIFT</option>
					<option value="130">ALT</option>
					<option value="131">GUI</option>
				</select>

				&nbsp;&nbsp;Modifier 2:&nbsp;
				<select class="modifier2" id='modifier2' name='modifier2'>
					<option value="0">None</option>
					<option value="128">CTRL</option>
					<option value="129">SHIFT</option>
					<option value="130">ALT</option>
					<option value="131">GUI</option>
				</select>

				&nbsp;&nbsp;Modifier 3:&nbsp;
				<select class="modifier3" id='modifier3' name='modifier3'>
					<option value="0">None</option>
					<option value="128">CTRL</option>
					<option value="129">SHIFT</option>
					<option value="130">ALT</option>
					<option value="131">GUI</option>
				</select>

				<br>

				&nbsp;&nbsp;Delay after helper (ms):&nbsp;
				<select class="helperdelay" id='helperdelay' name='helperdelay'>
					<option value="0">0</option>
					<option value="100">100</option>
					<option value="200">200</option>
					<option value="500">500</option>
					<option value="1000">1000</option>
				</select>

				<div class="form" style="width: 50%; text-align: : center; margin: auto;">
					<input type="hidden" id='save' name='save' value="general">
					<br /><button style='cursor: pointer;' form="generalconfig" type='save'>Save General Config</button>
				</div>
			</form>
		</div>
		</p>
		</div>
		<!-- Tab Menu -->
		<div id="menu" class="tabcontent">
			<div style="float: right; font-size: 11px"><a href="/download?file=menu1.json">download menu1.json</a></div>
			<br>
			<h3>Menu</h3>
			<p>
			<div id="container">
				<form>
					<label for="framework">Select Menu</label>
					<!--					<select onchange="updateMenuItems(this)" class="menunumber" id='menunumber' name='menunumber'> -->
					<select onchange="updateMenuItems(this)">
						<option value="0">Home Menu</option>
						<option value="1">Menu 1</option>
						<option value="2">Menu 2</option>
						<option value="3">Menu 3</option>
						<option value="4">Menu 4</option>
						<option value="5">Menu 5</option>
						<option value="6">Menu 6</option>
					</select>
				</form>
			</div>
			<form method='post' id="savemenu" action='/saveconfig'>
				<table style="height: 250px; width: 100%; border: 1px solid #000088; text-align: left;">
					<tbody>
						<tr>
							<td style="width: 8%;">
								Row/Col
							</td>
							<td style="width: 23%;">
								Col 1
							</td>
							<td style="width: 23%;">
								Col 2
							</td>
							<td style="width: 23%;">
								Col 3
							</td>
							<td style="width: 23%;">
								Col 4
							</td>
						</tr>
						<tr>
							<td style="width: 8%;">
								Row 1
							</td>
							<td style="width: 23%;">
								Button 1-1
								<br />Image:
								<select class="images" id='button11logo' name='button11logo'></select>
								<br />Action 1:
								<select class="actions" id='button11action0' name='button11action0'></select>
								<select class="actions" id='button11value0' name='button11value0'></select>
								<br />Action 2:
								<select class="actions" id='button11action1' name='button11action1'></select>
								<select class="actions" id='button11value1' name='button11value1'></select>
								<br />Action 3:
								<select class="actions" id='button11action2' name='button11action2'></select>
								<select class="actions" id='button11value2' name='button11value2'></select>
								<br />Latch? <input type="checkbox" id="button11latch" name="button11latch">
								latch to: <select class="images" id='button11latchlogo'
									name='button11latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 1-2
								<br />Image:
								<select class="images" id='button12logo' name='button12logo'></select>
								<br />Action 1:
								<select class="actions" id='button12action0' name='button12action0'></select>
								<select class="actions" id='button12value0' name='button12value0'></select>
								<br />Action 2:
								<select class="actions" id='button12action1' name='button12action1'></select>
								<select class="actions" id='button12value1' name='button12value1'></select>
								<br />Action 3:
								<select class="actions" id='button12action2' name='button12action2'></select>
								<select class="actions" id='button12value2' name='button12value2'></select>
								<br />Latch? <input type="checkbox" id="button12latch" name="button12latch">
								latch to: <select class="images" id='button12latchlogo'
									name='button12latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 1-3
								<br />Image:
								<select class="images" id='button13logo' name='button13logo'></select>
								<br />Action 1:
								<select class="actions" id='button13action0' name='button13action0'></select>
								<select class="actions" id='button13value0' name='button13value0'></select>
								<br />Action 2:
								<select class="actions" id='button13action1' name='button13action1'></select>
								<select class="actions" id='button13value1' name='button13value1'></select>
								<br />Action 3:
								<select class="actions" id='button13action2' name='button13action2'></select>
								<select class="actions" id='button13value2' name='button13value2'></select>
								<br />Latch? <input type="checkbox" id="button13latch" name="button13latch">
								latch to: <select class="images" id='button13latchlogo'
									name='button13latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 1-4
								<br />Image:
								<select class="images" id='button14logo' name='button14logo'></select>
								<br />Action 1:
								<select class="actions" id='button14action0' name='button14action0'></select>
								<select class="actions" id='button14value0' name='button14value0'></select>
								<br />Action 2:
								<select class="actions" id='button14action1' name='button14action1'></select>
								<select class="actions" id='button14value1' name='button14value1'></select>
								<br />Action 3:
								<select class="actions" id='button14action2' name='button14action2'></select>
								<select class="actions" id='button14value2' name='button14value2'></select>
								<br />Latch? <input type="checkbox" id="button14latch" name="button14latch">
								latch to: <select class="images" id='button14latchlogo'
									name='button14latchlogo'></select>
							</td>
						</tr>
						<tr>
							<td style="width: 8%;">
								Row 2
							</td>
							<td style="width: 23%;">
								Button 2-1
								<br />Image:
								<select class="images" id='button21logo' name='button21logo'></select>
								<br />Action 1:
								<select class="actions" id='button21action0' name='button21action0'></select>
								<select class="actions" id='button21value0' name='button21value0'></select>
								<br />Action 2:
								<select class="actions" id='button21action1' name='button21action1'></select>
								<select class="actions" id='button21value1' name='button21value1'></select>
								<br />Action 3:
								<select class="actions" id='button21action2' name='button21action2'></select>
								<select class="actions" id='button21value2' name='button21value2'></select>
								<br />Latch? <input type="checkbox" id="button21latch" name="button21latch">
								latch to: <select class="images" id='button21latchlogo'
									name='button21latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 2-2
								<br />Image:
								<select class="images" id='button22logo' name='button22logo'></select>
								<br />Action 1:
								<select class="actions" id='button22action0' name='button22action0'></select>
								<select class="actions" id='button22value0' name='button22value0'></select>
								<br />Action 2:
								<select class="actions" id='button22action1' name='button22action1'></select>
								<select class="actions" id='button22value1' name='button22value1'></select>
								<br />Action 3:
								<select class="actions" id='button22action2' name='button22action2'></select>
								<select class="actions" id='button22value2' name='button22value2'></select>
								<br />Latch? <input type="checkbox" id="button22latch" name="button22latch">
								latch to: <select class="images" id='button22latchlogo'
									name='button22latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 2-3
								<br />Image:
								<select class="images" id='button23logo' name='button23logo'></select>
								<br />Action 1:
								<select class="actions" id='button23action0' name='button23action0'></select>
								<select class="actions" id='button23value0' name='button23value0'></select>
								<br />Action 2:
								<select class="actions" id='button23action1' name='button23action1'></select>
								<select class="actions" id='button23value1' name='button23value1'></select>
								<br />Action 3:
								<select class="actions" id='button23action2' name='button23action2'></select>
								<select class="actions" id='button23value2' name='button23value2'></select>
								<br />Latch? <input type="checkbox" id="button23latch" name="button23latch">
								latch to: <select class="images" id='button23latchlogo'
									name='button23latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 2-4
								<br />Image:
								<select class="images" id='button24logo' name='button24logo'></select>
								<br />Action 1:
								<select class="actions" id='button24action0' name='button24action0'></select>
								<select class="actions" id='button24value0' name='button24value0'></select>
								<br />Action 2:
								<select class="actions" id='button24action1' name='button24action1'></select>
								<select class="actions" id='button24value1' name='button24value1'></select>
								<br />Action 3:
								<select class="actions" id='button24action2' name='button24action2'></select>
								<select class="actions" id='button24value2' name='button24value2'></select>
								<br />Latch? <input type="checkbox" id="button24latch" name="button24latch">
								latch to: <select class="images" id='button24latchlogo'
									name='button24latchlogo'></select>
							</td>
						</tr>
						<tr>
							<td style="width: 8%;">
								Row 3
							</td>
							<td style="width: 23%;">
								Button 3-1
								<br />Image:
								<select class="images" id='button31logo' name='button31logo'></select>
								<br />Action 1:
								<select class="actions" id='button31action0' name='button31action0'></select>
								<select class="actions" id='button31value0' name='button31value0'></select>
								<br />Action 2:
								<select class="actions" id='button31action1' name='button31action1'></select>
								<select class="actions" id='button31value1' name='button31value1'></select>
								<br />Action 3:
								<select class="actions" id='button31action2' name='button31action2'></select>
								<select class="actions" id='button31value2' name='button31value2'></select>
								<br />Latch? <input type="checkbox" id="button31latch" name="button31latch">
								latch to: <select class="images" id='button31latchlogo'
									name='button31latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 3-2
								<br />Image:
								<select class="images" id='button32logo' name='button32logo'></select>
								<br />Action 1:
								<select class="actions" id='button32action0' name='button32action0'></select>
								<select class="actions" id='button32value0' name='button32value0'></select>
								<br />Action 2:
								<select class="actions" id='button32action1' name='button32action1'></select>
								<select class="actions" id='button32value1' name='button32value1'></select>
								<br />Action 3:
								<select class="actions" id='button32action2' name='button32action2'></select>
								<select class="actions" id='button32value2' name='button32value2'></select>
								<br />Latch? <input type="checkbox" id="button32latch" name="button32latch">
								latch to: <select class="images" id='button32latchlogo'
									name='button32latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 3-3
								<br />Image:
								<select class="images" id='button33logo' name='button33logo'></select>
								<br />Action 1:
								<select class="actions" id='button33action0' name='button33action0'></select>
								<select class="actions" id='button33value0' name='button33value0'></select>
								<br />Action 2:
								<select class="actions" id='button33action1' name='button33action1'></select>
								<select class="actions" id='button33value1' name='button33value1'></select>
								<br />Action 3:
								<select class="actions" id='button33action2' name='button33action2'></select>
								<select class="actions" id='button33value2' name='button33value2'></select>
								<br />Latch? <input type="checkbox" id="button33latch" name="button33latch">
								latch to: <select class="images" id='button33latchlogo'
									name='button33latchlogo'></select>
							</td>
							<td style="width: 23%;">
								Button 3-4
								<br />Image:
								<select class="images" id='button34logo' name='button34logo'></select>
								<br />Action 1:
								<select class="actions" id='button34action0' name='button34action0'></select>
								<select class="actions" id='button34value0' name='button34value0'></select>
								<br />Action 2:
								<select class="actions" id='button34action1' name='button34action1'></select>
								<select class="actions" id='button34value1' name='button34value1'></select>
								<br />Action 3:
								<select class="actions" id='button34action2' name='button34action2'></select>
								<select class="actions" id='button34value2' name='button34value2'></select>
								<br />Latch? <input type="checkbox" id="button34latch" name="button34latch">
								latch to: <select class="images" id='button34latchlogo'
									name='button34latchlogo'></select>
							</td>
						</tr>
					</tbody>
				</table>
				<div class="form" style="width: 50%; text-align: : center; margin: auto;">
					<input type="hidden" id='save' name='save' value="menu">
					<br /><button style='cursor: pointer;' form="savemenu" type='save'>Save Menu Config</button>
			</form>
		</div>
		</p>
		</div>
		<!-- Upload Logo -->
		<div id="uploadimage" class="tabcontent">
			<h3>Upload a new logo</h3>
			<div style="width: 70%; text-align: left; margin: auto;"> You can customize the logos that are used. If you
				upload a file with a name that already exists, the file is <u>overwritten</u>. You can only upload .bmp
				images. There images should be in a 24-bit RGB format and should be no more then 75x75 pixels. Smaller
				images are supported.<br /><br />

				Images that are used for Elgato's Stream Deck are also supported. These should also be in a 24-bit RGB
				format. You can convert these using free online tools like <a
					href="https://online-converting.com/image/convert2bmp/"
					target="_blank">https://online-converting.com/image/convert2bmp/</a>.<br /><br />

				FreeTouchDeck will check the colour of the first pixel in the image. If that pixel is black (#000000),
				all
				black pixels will be rendered as transparent and the button colour chosen in the "General" tab will be
				used.
				If that pixel has a colour, the button will have that colour so that the image blends in nicely.
			</div>
			<p>
			<div class="form" style="width: 10%; text-align: : center; margin: auto;">
				<input form="uploadfile" type="file" name="name" accept=".bmp"><br /><br />
				<button style='cursor: pointer;' form="uploadfile" type="save">Upload</button>
			</div>
			</p>
		</div>

		<!-- File Editor -->
		<div id="editor" class="tabcontent">
			<h3>Remove files</h3>

			<div class="form" id=deletefilelist style="width: 20%; text-align: left; margin: auto;">

			</div>

		</div>

		<!-- Upload JSON -->
		<div id="uploadjson" class="tabcontent">
			<h3>Upload a JSON Config File</h3>
			<div style="width: 70%; text-align: left; margin: auto;"> You can upload a previously downloaded JSON file
				to
				save you some time from having to configure a whole menu. The filename should be the menu name (all
				lower-case), e.g. menu.json for Menu, menu2.json for Menu 2, etc. It is also a good idea to validate
				your
				.json file if you made any manual modifications. You can do that using <a href="https://jsonlint.com/"
					target="_blank">JSONLint</a><br /><br /></div>
			<p>
			<div class="form" style="width: 10%; text-align: center; margin: auto;">
				<input form="uploadjsonfile" type="file" name="name" accept=".json"><br /><br />
				<button style='cursor: pointer;' form="uploadjsonfile" type="save">Upload JSON</button>
			</div>
			</p>
		</div>

		<!-- INFO -->
		<div id="info" class="tabcontent">
			<h3>About FreeTouchDeck</h3>
			<div id="infocontent" style="width: 40%; text-align: left; margin: auto;">

			</div>
			<p>
		</div>
		</div>

		</div>



	</body>

</html>